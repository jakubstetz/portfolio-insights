# Day 004 - 07 April 2025
---
**Key Milestone/Celebration:** 

## What I Did Today
---
- Replaced docstring `'''` enclosures with `"""`.
- Finalized implementation of alert management routes and functions in `server.py` and `alerts.py`, respectively, Including error handling, type validation, and SQL query string input placeholders in both positional and named styles.
  - `GET` for retrieving a stock price alert by id.
  - `POST` for creating a new stock price alert.
  - `DELETE` for deleting a stock price alert by id.
- Created an alert `BaseModel` instance to work with my `POST` route more easily.

## Key Decisions & Why
---
- Will be using input placeholders in SQL queries executed using the `psycopg` library, for security and to follow standard practice.
- I will take in alert information as a JSON model using the `pydantic` library.
  - This allows me to take in complicated data in a more clean and readable way.
  - This allows me to do automatic type validation with barely any extra code.
- I will use the `datetime` library to parse my expiration date in my alerts POST route into a valid `datetime` object.
  - This is the easiest way to make an object that will be friendly to SQL in `alerts.py`.

## What I Learned or Reinforced
---
### What I Learned
- PEP 257 recommends that all Python docstrings be enclosed in `"""` rather than `'''`.
- Fetching data from `SELECT` SQL queries run through the `psycopg` library.
- How to use input placeholders for SQL query strings in the `psycopg` library.
- Using the `datetime` library. This can be used to create time inputs into SQL queries in `pydantic` that are correctly processed by PostgreSQL.
- FastAPI will automatically parse query parameters if the function associated with a route has type hints.
- How to use the `pydantic` library, and specifically the `BaseModel` class.
- FastAPI will parse HTTP request body and query parameters according to whether I include type hints in the route function parameters indicating that either basic types or a `pydantic` model is expected.
- I can use `RETURNING` in SQL queries to return a certain row value after creating or deleting a row.
- Using named versus positional styles with `psycopg` input placeholders. The former allows me to easily deconstruct a dictionary into its values by key.

### What I Reinforced
- Using input placeholders in SQL queries constructed in Python code.
- Working with query parameters in API routes.
- Working with JSON objects in HTTP requests.
- Testing server routes using Thunder Client.

## Challenges
---
- 

## Issues
---
### Created
---
- [[Feature] Return proper HTTP response objects in `server.py` routes](https://github.com/jakubstetz/portfolio-insights/issues/20)
- [[Idea] Allow for multiuse alerts that can be triggered multiple times](https://github.com/jakubstetz/portfolio-insights/issues/21)

### Resolved
---
- [[Feature] Implement code in backend to interact with DB](https://github.com/jakubstetz/portfolio-insights/issues/18)

## Next Steps
---
- 

## Notes to Future Me
---
- According to PEP 257, docstrings should be enclosed in `"""` rather than `'''`. This is good for me to keep in mind for the future.

## References
---
- [psycopg Documentation - Cursor Classes](https://www.psycopg.org/psycopg3/docs/api/cursors.html)
- [psycopg Documentation - Passing Parameters to SQL Queries](https://www.psycopg.org/psycopg3/docs/basic/params.html)
- [PEP 257 - Docstring Conventions](https://peps.python.org/pep-0257/)
- [Python Documentation - `datetime`](https://docs.python.org/3/library/datetime.html)
- [Pydantic Documentation](https://docs.pydantic.dev/latest/)